<!DOCTYPE html>
<html lang="en">

<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title></title>
</head>

<body>
<script src="../../assets/simplex-noise.min.js"></script>
<script src="../../assets/p5.min.js"></script>
<script src="../../assets/dat.gui.min.js"></script>
<script>

// number of particles
const N = 500
 
// colors (some of them taken from http://www.colourlovers.com/pattern/5526827/bleak
const cols = [ '#FF8A00', '#FFD200', '#749D9D', '#FCF5B3', '#B39500', '#272429' ]
 
// collection of all particles
const particles = []

class Particle {
  // position
  x
  y
  dx
  dy
  id
  age
  c = cols[ceil(random(cols.length))]
 
  constructor(i) {
    this.id = i
    this.reset()
  }

  reset() {
    const angle = random(TWO_PI)
    const r = 5.0 * randomGaussian() + (width / 2 - 100) * (1.0 - pow(random(1.0), 7.0))
    x = cos(angle) * r
    y = sin(angle) * r
 
    // set random age
    age = ceil(random(100,1000))
  }
 
  draw() {
   stroke(c)
   point(x + width / 2, y + height / 2)
  }
 
  // update position with externally calculated speed
  // check also age
  update() {
    x += dx
    y += dy
    if(--age < 0) {
      this.reset()
    }
  }

}

function setup() {
    createCanvas(1000, 1000)
    noFill()
    smooth()
    strokeWeight(2.0) // exaggerate a little bit for a while
    background(0, 0, 20)

    for(let i=0; i < N; i ++) {
        particles.push( new Particle(i) )
    }
}

function draw() {
    for(p of particles) {
        p.draw()
    }
}

function mouseClicked() {

}

</script>
</body>

</html>